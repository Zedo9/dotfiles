#!/bin/bash
links_file_path="$HOME/Music/links"

links=`cat $links_file_path`
array=( $links )
output="$HOME/Music/output"

if [ -d "$output" ]; then
    echo "Output directory exists"
else
    mkdir -p $output
    echo "Created output directory"
fi

for link in ${!array[@]}; do
    echo "$((link+1))/${#array[@]}"
    youtube-dl --external-downloader aria2c --external-downloader-args '-c -j 3 -x 3 -s 3 -k 1M' --extract-audio --audio-format mp3 --audio-quality 0 -o "$output/%(title)s.%(ext)s" ${array[$link]}
	# youtube-dl --external-downloader aria2c --external-downloader-args '-c -j 3 -x 3 -s 3 -k 1M' -x -f bestaudio -o "$output/%(title)s.%(ext)s" ${array[$link]}
done
